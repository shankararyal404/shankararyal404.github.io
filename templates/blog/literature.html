<section class="section blog-single blog-literature">
    <div class="container">
        <a href="/blogs/index.html" class="btn-link" style="margin-bottom: 30px; display: inline-block;">← Back to
            Blogs</a>

        <article class="literature-article">
            <!-- 1. Top Header: Centered Title & Meta -->
            <header class="page-header">
                <h1 class="page-title">{{BLOG_TITLE}}</h1>
                <div class="page-meta">
                    <span class="meta-item">{{LITERATURE_TYPE}}</span>
                    <span class="meta-separator">•</span>
                    <span class="meta-item">{{WRITTEN_BY}}</span>
                    <span class="meta-separator">•</span>
                    <span class="meta-item">{{PLACE}}</span>
                    <span class="meta-separator">•</span>
                    <span class="meta-item">{{BLOG_DATE}}</span>
                    <span class="meta-separator">•</span>
                    <span class="meta-item">{{PUBLISHER}}</span>
                </div>
            </header>

            <!-- 2. Hero Image: Good Sized -->
            <div class="literature-hero-image">
                <img src="{{BLOG_IMAGE}}" alt="{{BLOG_TITLE}}" loading="eager">
            </div>

            <!-- 3. Poem/Literature Content (Non-bilingual Markdown Body) -->
            <div class="literature-main-body markdown-body">
                {{BLOG_BODY}}
            </div>

            <!-- 4. Lower Bilingual Container (Reflection/Theme/Intro) -->
            <div class="literature-info-container" id="lit-info-container">
                <div class="info-header-block">
                    <h2 class="container-title">{{BLOG_TITLE}}</h2>
                    <div class="container-meta">
                        Written by {{WRITTEN_BY}} • {{BLOG_DATE}} • {{PLACE}}
                    </div>
                    <!-- Language Toggle (hidden if only one language exists) -->
                    <div class="language-toggle" id="lang-toggle-wrapper">
                        <button class="lang-btn active" data-lang="en" id="btn-en"
                            onclick="switchLanguage('en')">ENGLISH</button>
                        <button class="lang-btn" data-lang="ne" id="btn-ne"
                            onclick="switchLanguage('ne')">नेपाली</button>
                    </div>
                </div>

                <div class="info-body-block">
                    <!-- English Section -->
                    <div id="content-en" class="lang-content">
                        {{#REFLECTION_EN}}<section class="info-section">
                            <h3 class="section-heading">Writer Reflection</h3>
                            <div class="section-text">{{REFLECTION_EN}}</div>
                        </section>{{/REFLECTION_EN}}
                        {{#THEME_EN}}<section class="info-section">
                            <h3 class="section-heading">Poem Description</h3>
                            <div class="section-text">{{THEME_EN}}</div>
                        </section>{{/THEME_EN}}
                        {{#INTRO_EN}}<section class="info-section">
                            <h3 class="section-heading">Writer Introduction</h3>
                            <div class="section-text">{{INTRO_EN}}</div>
                        </section>{{/INTRO_EN}}
                    </div>

                    <!-- Nepali Section -->
                    <div id="content-ne" class="lang-content" style="display: none;">
                        {{#REFLECTION_NE}}<section class="info-section">
                            <h3 class="section-heading">लेखकको प्रतिबिम्ब</h3>
                            <div class="section-text">{{REFLECTION_NE}}</div>
                        </section>{{/REFLECTION_NE}}
                        {{#THEME_NE}}<section class="info-section">
                            <h3 class="section-heading">कविताको विवरण</h3>
                            <div class="section-text">{{THEME_NE}}</div>
                        </section>{{/THEME_NE}}
                        {{#INTRO_NE}}<section class="info-section">
                            <h3 class="section-heading">लेखकको परिचय</h3>
                            <div class="section-text">{{INTRO_NE}}</div>
                        </section>{{/INTRO_NE}}
                    </div>
                </div>
            </div>

            <!-- Tags -->
            <div class="literature-tags">
                <span class="bold">Tags:</span> {{BLOG_TAGS}}
            </div>

            <!-- Comments Section -->
            <div class="comments-section">
                <h3 class="h3">Comments</h3>
                <div class="giscus"></div>
                <script src="https://giscus.app/client.js" data-repo="shankararyal404/shankararyal404.github.io"
                    data-repo-id="R_kgDOQoXjXg" data-category="Announcements" data-category-id="DIC_kwDOQoXjXs4C0bt8"
                    data-mapping="pathname" data-strict="1" data-reactions-enabled="1" data-emit-metadata="1"
                    data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy"
                    crossorigin="anonymous" async>
                    </script>
            </div>
        </article>
    </div>
</section>

<script>
    // Configuration from Build Script
    const HAS_EN = {{ HAS_EN }};
    const HAS_NE = {{ HAS_NE }};

    // Initialize Visibility on Load
    document.addEventListener('DOMContentLoaded', () => {
        const toggleWrapper = document.getElementById('lang-toggle-wrapper');
        const btnEn = document.getElementById('btn-en');
        const btnNe = document.getElementById('btn-ne');

        // Hide toggle if only one language is available
        if (!(HAS_EN && HAS_NE)) {
            toggleWrapper.style.display = 'none';
        } else {
            // Show specific buttons based on availability
            if (!HAS_EN) btnEn.style.display = 'none';
            if (!HAS_NE) btnNe.style.display = 'none';
        }

        // Set default view: Primary (NE) if EN is missing
        if (!HAS_EN && HAS_NE) {
            switchLanguage('ne');
        } else if (HAS_EN) {
            switchLanguage('en');
        } else {
            // If neither has content (unlikely but safe), hide container
            document.getElementById('lit-info-container').style.display = 'none';
        }
    });

    function switchLanguage(lang) {
        // Toggle visibility of language content blocks
        document.querySelectorAll('.lang-content').forEach(el => el.style.display = 'none');
        const target = document.getElementById('content-' + lang);
        if (target) target.style.display = 'block';

        // Update active button state
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        const activeBtn = document.querySelector(`.lang-btn[data-lang="${lang}"]`);
        if (activeBtn) activeBtn.classList.add('active');
    }
</script>